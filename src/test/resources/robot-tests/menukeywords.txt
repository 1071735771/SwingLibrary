*** Settings ***
Test Teardown   selectMainWindow
Library         TestSwingLibrary

*** Variables ***
${menuText}  Test Menu
${showDialog}  ${menuText}|Show Test Dialog
${mutableMenu}  ${menuText}|Mutable Menu
${disabledMenu}  ${menuText}|Disabled Menu Item
${checkboxMenu}  Test menu checkbox

*** Test Cases ***
Select From Main Menu
    selectEmptyContext
    selectFromMainMenu  ${showDialog}
    dialogShouldBeOpen  Message
    closeDialog  Message

Select From Main Menu And Wait
    selectEmptyContext
    selectFromMainMenuAndWait  ${mutableMenu}
    mainMenuItemShouldExist  ${menuText}|Menu Item Was Pushed

Selecting Disabled Menu Item Should Fail
    selectEmptyContext
    runKeywordAndExpectError  Menu item '${disabledMenu}' is disabled.  selectFromMainMenu  ${disabledMenu}

Menu Item Should Exist
    menuItemShouldExist  ${showDialog}
    runKeywordAndExpectError  Menu item 'unexisting|menu' does not exist.  menuItemShouldExist  unexisting|menu

Menu Item Should Not Exist
    menuItemShouldNotExist  unexisting|menu
    runKeywordAndExpectError  Menu item '${showDialog}' exists.  menuItemShouldNotExist  ${showDialog}

Main Menu Item Should Exist
    selectEmptyContext
    mainMenuItemShouldExist  ${showDialog}
    runKeywordAndExpectError  Menu item 'unexisting|menu' does not exist.  mainMenuItemShouldExist  unexisting|menu

Main Menu Item Should Not Exist
    selectEmptyContext
    mainMenuItemShouldNotExist  unexisting|menu
    runKeywordAndExpectError  Menu item '${showDialog}' exists.  mainMenuItemShouldNotExist  ${showDialog}

Menu Item Should Be Enabled
    menuItemShouldBeEnabled  ${showDialog}

Menu Item Should Be Disabled
    menuItemShouldBeDisabled  ${disabledMenu}

Menu Item Should Have Children
    menuItemShouldHaveChildren  Test Menu2|Sub Menu1
    runKeywordAndExpectError  Menu item 'Test Menu2|placeholder item 1' does not have children.  menuItemShouldHaveChildren  Test Menu2|placeholder item 1

Menu Item Should Not Have Children
    menuItemShouldNotHaveChildren  Test Menu2|placeholder item 1
    runKeywordAndExpectError  Menu item 'Test Menu2|Sub Menu1' has children.  menuItemShouldNotHaveChildren  Test Menu2|Sub Menu1

Get Menu Item Names
    [Template]  menuItemsShouldContain
    Test Menu2|Sub Menu1  item 1
    Test Menu2|Sub Menu1  item 2
    Test Menu2|Sub Menu1  item 3
    Test Menu2  placeholder item 1
    Test Menu2  Sub Menu1
    Test Menu2  placeholder item 2

Get Menu Item Names Failures
    runKeywordAndExpectError  Menu item 'unexisting|menu' does not exist.
    ...  getMenuItemNames  unexisting|menu
    runKeywordAndExpectError  Menu item 'Test Menu2|Sub Menu1|item 3' does not have children.
    ...  getMenuItemNames  Test Menu2|Sub Menu1|item 3

Get Main Menu Item Name
    mainMenuItemNameShouldBe  0  ${menuText}

Get Main Menu Item Names
    mainMenuItemNamesShouldContain  ${menuText}

Main Menu Item Should Be Selected
    runKeywordAndExpectError  Menu item '${menuText}|${checkboxMenu}' is not selected.  mainMenuItemShouldBeChecked  ${menuText}|${checkboxMenu}
    selectFromMainMenuAndWait  ${menuText}|${checkboxMenu}
    mainMenuItemShouldBeChecked  ${menuText}|${checkboxMenu}
    [Teardown]  selectFromMainMenuAndWait  ${menuText}|${checkboxMenu}

Main Menu Item Should Not Be Selected
    mainMenuItemShouldNotBeChecked  ${menuText}|${checkboxMenu}
    selectFromMainMenuAndWait  ${menuText}|${checkboxMenu}
    runKeywordAndExpectError  Menu item '${menuText}|${checkboxMenu}' is selected.  mainMenuItemShouldNotBeChecked  ${menuText}|${checkboxMenu}
    [Teardown]  selectFromMainMenuAndWait  ${menuText}|${checkboxMenu}

Select From Popup Menu
    selectFromPopupMenu  testTextField  Show name
    selectDialog  Message
    # On Linux and Windows testTextField index is 0, on OSX it is 1. Using label name is a workaround.
    ${labelContents}=  getLabelContent    OptionPane.label
    shouldBeEqual  testTextField  ${labelContents}
    [Teardown]  closeDialog  Message

*** Keywords ***
mainMenuItemNameShouldBe
    [Arguments]  ${menuItemIndex}  ${expectedName}
    ${menuItemName}=  getMainMenuItemName  0
    shouldBeEqual  ${expectedName}  ${menuItemName}

mainMenuItemNamesShouldContain
    [Arguments]  ${expectedName}
    @{menuItemNames}=  getMainMenuItemNames
    shouldContain  ${menuItemNames}  ${expectedName}

menuItemsShouldContain
    [Arguments]  ${path}  ${item}
    @{items}=  getMenuItemNames  ${path}
    shouldContain  ${items}  ${item}
